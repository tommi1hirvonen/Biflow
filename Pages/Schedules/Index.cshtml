@page
@model EtlManager.Pages.Schedules.IndexModel
@{
    ViewData["Title"] = "Schedules";
}

<h2>Schedules</h2>

<table class="table">
    <thead>
        <tr>
            <th>Job</th>
            <th>Time</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var job in Model.Jobs.OrderBy(job => job.JobName))
        {
            @foreach (var schedule in job.Schedules.OrderBy(s => s.TimeHours).ThenBy(s => s.TimeMinutes))
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => job.JobName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => schedule.TimeHours):@schedule.GetMinutesText()
                    </td>
                    <td>
                        @if (schedule.Monday)
                        {
                            <span class="badge badge-primary">Monday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Monday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Tuesday)
                        {
                            <span class="badge badge-primary">Tuesday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Tuesday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Wednesday)
                        {
                            <span class="badge badge-primary">Wednesday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Wednesday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Thursday)
                        {
                            <span class="badge badge-primary">Thursday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Thursday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Friday)
                        {
                            <span class="badge badge-primary">Friday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Friday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Saturday)
                        {
                            <span class="badge badge-primary">Saturday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Saturday</span>
                        }
                    </td>
                    <td>
                        @if (schedule.Sunday)
                        {
                            <span class="badge badge-primary">Sunday</span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">Sunday</span>
                        }
                    </td>
                    <td>
                        <form method="post">
                            <div class="btn-group">
                                <button type="button" class="btn btn-outline-danger btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Delete
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item" asp-page-handler="Delete" asp-route-id="@schedule.ScheduleId">Confirm</button>
                                </div>
                            </div>
                        </form>
                    </td>
                </tr>
            }
        }
    </tbody>
</table>