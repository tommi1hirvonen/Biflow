@page "/jobs/steps/{Id:guid}"

@inject IDbContextFactory<EtlManagerContext> DbFactory
@inject IWebHostEnvironment WebHostEnvironment
@inject IConfiguration configuration 
@inject IJSRuntime JsRuntime
@inject NavigationManager NavigationManager 

<JobDetailsComponent CurrentJob="Job" Jobs="Jobs" />

@code {

    [Parameter]
    public Guid Id { get; set; }

    private Job Job { get; set; }
    private IList<Job> Jobs { get; set; }

    private Job EditJob { get; set; }

    protected override async Task OnInitializedAsync()
    {
        using var context = DbFactory.CreateDbContext();
        Jobs = await context.Jobs.OrderBy(job => job.JobName).ToListAsync();
        Job = Jobs.First(job => job.JobId == Id);
        EditJob = new() { JobName = Job.JobName };
    }

    protected override void OnParametersSet()
    {
        Job = Jobs.First(job => job.JobId == Id);
    }

}
